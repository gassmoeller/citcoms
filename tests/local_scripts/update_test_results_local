#!/bin/bash

cd `dirname $0`
citcom_folder=`pwd`
citcom_folder=`dirname $citcom_folder`

if [ "$1" == "" ]; then
read -p "This will overwrite ALL your current reference test results, are you sure? ('Yes' to proceed):" answer

$reference_tests="../automated_integration_tests"

if [ "$answer" == "Yes" ]; then
for testcase in `ls $reference_tests`
do

reference_data="$testcase"reference_data
test_data="$testcase"data

svn rm --force $reference_data/*
svn cp -r $test_data/* $reference__data/
svn info $citcom_folder | grep `Revision` > $reference_tests/$testcase/reference_data/revision.log
done
fi

else
read -p "This will overwrite your current reference test results for test $1, are you sure? ('Yes' to proceed):" answer

test_folder=`dirname $1`/`basename $1`

if [ "$answer" == "Yes" ]; then
reference_data=$test_folder/reference_data
test_data=$test_folder/data

cp -r $test_data/* $reference_data/
svn info $citcom_folder | grep Revision > $reference_data/revision.log
fi
fi
